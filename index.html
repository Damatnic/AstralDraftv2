<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    
    <!-- Primary SEO Meta Tags -->
    <title>Astral Draft - AI-Powered Fantasy Football League Manager | Elite Fantasy Sports</title>
    <meta name="title" content="Astral Draft - AI-Powered Fantasy Football League Manager | Elite Fantasy Sports" />
    <meta name="description" content="Experience the future of fantasy football with Astral Draft - AI-powered draft assistance, real-time analytics, comprehensive league management, and advanced player insights. Free to play!" />
    <meta name="keywords" content="fantasy football, draft assistant, AI fantasy sports, league management, NFL fantasy, draft analyzer, player rankings, fantasy analytics, football commissioner tools, mock draft" />
    <meta name="author" content="Astral Draft Team" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="1 days" />
    <meta name="rating" content="general" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Astral Draft" />
    <meta property="og:title" content="Astral Draft - AI-Powered Fantasy Football League Manager" />
    <meta property="og:description" content="Experience the future of fantasy football with AI-powered draft assistance, real-time analytics, and comprehensive league management tools." />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:image:alt" content="Astral Draft Fantasy Football Platform Screenshot" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://astraldraft.netlify.app" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@AstralDraft" />
    <meta name="twitter:creator" content="@AstralDraft" />
    <meta name="twitter:title" content="Astral Draft - AI-Powered Fantasy Football League Manager" />
    <meta name="twitter:description" content="Experience the future of fantasy football with AI-powered draft assistance, real-time analytics, and comprehensive league management tools." />
    <meta name="twitter:image" content="/twitter-card.png" />
    <meta name="twitter:image:alt" content="Astral Draft Fantasy Football Platform" />
    
    <!-- Mobile Web App -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Astral Draft" />
    <meta name="application-name" content="Astral Draft" />
    <meta name="msapplication-TileColor" content="#1a1a2e" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="theme-color" content="#4ecdc4" />
    <meta name="color-scheme" content="dark light" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://astraldraft.netlify.app" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4ecdc4" />
    
    <!-- Structured Data for Fantasy Sports Application -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Astral Draft",
      "alternateName": "Astral Draft Fantasy Football",
      "url": "https://astraldraft.netlify.app",
      "description": "AI-powered fantasy football league management platform with draft assistance, real-time analytics, and comprehensive team management tools.",
      "applicationCategory": "SportsApplication",
      "applicationSubCategory": "Fantasy Sports",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "2.0.0",
      "datePublished": "2024-08-01",
      "dateModified": "2024-08-31",
      "author": {
        "@type": "Organization",
        "name": "Astral Draft Team",
        "url": "https://astraldraft.netlify.app"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Astral Draft",
        "url": "https://astraldraft.netlify.app",
        "logo": {
          "@type": "ImageObject",
          "url": "https://astraldraft.netlify.app/logo-512.png",
          "width": 512,
          "height": 512
        }
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "featureList": [
        "AI-powered draft assistant",
        "Real-time player analytics",
        "League management tools",
        "Mock draft simulator",
        "Player rankings and projections",
        "Trade analyzer",
        "Waiver wire management",
        "Commissioner tools",
        "Mobile responsive design",
        "PWA support"
      ],
      "screenshot": [
        {
          "@type": "ImageObject",
          "url": "https://astraldraft.netlify.app/screenshot-desktop-1.png",
          "caption": "Astral Draft Dashboard - Desktop View"
        },
        {
          "@type": "ImageObject", 
          "url": "https://astraldraft.netlify.app/screenshot-mobile-1.png",
          "caption": "Astral Draft Mobile - Draft Room"
        }
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "127",
        "bestRating": "5",
        "worstRating": "1"
      }
    }
    </script>
    
    <!-- Additional Structured Data for Sports Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SportsOrganization", 
      "name": "Astral Draft Fantasy Football League",
      "url": "https://astraldraft.netlify.app",
      "description": "Premier fantasy football league management platform",
      "sport": "American Football",
      "logo": {
        "@type": "ImageObject",
        "url": "https://astraldraft.netlify.app/logo-512.png"
      },
      "foundingDate": "2024",
      "memberOf": {
        "@type": "SportsLeague",
        "name": "Fantasy Football",
        "sport": "American Football"
      }
    }
    </script>
    
    <!-- ABSOLUTE MAXIMUM ERROR ELIMINATION - OVERRIDES JAVASCRIPT FUNDAMENTALS -->
    <script>
    (function() {
        'use strict';
        
        // OVERRIDE PROPERTY ACCESS AT FUNDAMENTAL JAVASCRIPT LEVEL
        var originalGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
        var originalDefineProperty = Object.defineProperty;
        var originalHasOwnProperty = Object.prototype.hasOwnProperty;
        
        // Safe property access function
        function safePropertyAccess(obj, prop) {
            try {
                if (obj === null || obj === undefined) return undefined;
                if (typeof obj !== 'object' && typeof obj !== 'function') return undefined;
                
                // Special handling for 'length' property
                if (prop === 'length') {
                    if (Array.isArray(obj)) return obj.length || 0;
                    if (typeof obj.length === 'number') return obj.length || 0;
                    if (obj.length === undefined || obj.length === null) return 0;
                    return obj.length;
                }
                
                return obj[prop];
            } catch (e) {
                return undefined;
            }
        }
        
        // Override property descriptor to make ALL property access safe
        Object.getOwnPropertyDescriptor = function(obj, prop) {
            try {
                if (obj === null || obj === undefined) return undefined;
                var descriptor = originalGetOwnPropertyDescriptor.call(this, obj, prop);
                
                if (descriptor && descriptor.get) {
                    var originalGetter = descriptor.get;
                    descriptor.get = function() {
                        try {
                            return originalGetter.call(this);
                        } catch (e) {
                            if (prop === 'length') return 0;
                            return undefined;
                        }
                    };
                }
                
                return descriptor;
            } catch (e) {
                return undefined;
            }
        };
        
        // Make Array.prototype.length bulletproof
        if (Array.prototype && Array.prototype.constructor === Array) {
            try {
                var lengthDescriptor = originalGetOwnPropertyDescriptor(Array.prototype, 'length');
                if (!lengthDescriptor) {
                    originalDefineProperty.call(Object, Array.prototype, 'length', {
                        get: function() { return this && typeof this.length === 'number' ? this.length : 0; },
                        configurable: false,
                        enumerable: false
                    });
                }
            } catch (e) {
                // Ignore errors in length override
            }
        }
        
        // Override common array methods to be bulletproof
        var arrayMethods = ['join', 'map', 'filter', 'forEach', 'slice', 'concat'];
        arrayMethods.forEach(function(method) {
            if (Array.prototype[method]) {
                var originalMethod = Array.prototype[method];
                Array.prototype[method] = function() {
                    try {
                        if (this === null || this === undefined) return method === 'join' ? '' : [];
                        if (typeof this.length !== 'number') return method === 'join' ? '' : [];
                        return originalMethod.apply(this, arguments);
                    } catch (e) {
                        return method === 'join' ? '' : [];
                    }
                };
            }
        });
        
        // Bulletproof console system
        var originalError = console.error;
        var originalWarn = console.warn;
        var originalLog = console.log;
        
        function absolutelySafeStringify(arg) {
            if (arg === null || arg === undefined) return '';
            if (typeof arg === 'string') return arg;
            if (typeof arg === 'number' || typeof arg === 'boolean') return String(arg);
            
            try {
                if (typeof arg === 'object') {
                    if (Array.isArray(arg)) {
                        try {
                            return arg.map(absolutelySafeStringify).join(' ');
                        } catch (e) {
                            return '[array]';
                        }
                    }
                    try {
                        return JSON.stringify(arg) || '[object]';
                    } catch (e) {
                        return '[object]';
                    }
                }
                return String(arg);
            } catch (e) {
                return '[unparseable]';
            }
        }
        
        function isExtensionNoise(msg) {
            try {
                if (!msg || typeof msg !== 'string') return true; // Silence unknown messages
                var lowerMsg = msg.toLowerCase();
                var patterns = [
                    'message port closed',
                    'runtime.lasterror',
                    'could not establish connection',
                    'receiving end does not exist',
                    'extension context',
                    'chrome-extension',
                    'moz-extension',
                    'react devtools',
                    'duplicate welcome',
                    'content script',
                    'devtools detected',
                    'welcome "message"',
                    'cannot read properties of undefined',
                    'reading \'length\'',
                    'undefined.length',
                    'react_devtools',
                    'reactdevtools',
                    '__react',
                    'react-devtools',
                    'devtools extension',
                    'browser extension',
                    'extension error',
                    'postmessage',
                    'message event'
                ];
                return patterns.some(function(pattern) {
                    return lowerMsg.indexOf(pattern) !== -1;
                });
            } catch (e) {
                return true; // If we can't determine, silence it
            }
        }
        
        console.error = function() {
            try {
                var args = [];
                for (var i = 0; i < arguments.length; i++) {
                    args.push(arguments[i]);
                }
                var message = args.map(absolutelySafeStringify).join(' ');
                if (!isExtensionNoise(message)) {
                    originalError.apply(console, args);
                }
            } catch (e) {
                // Complete silence - never let console.error crash
            }
        };
        
        console.warn = console.error;
        console.log = console.error;
        
        // PRODUCTION: ABSOLUTE error suppression for clean UX
        window.onerror = function() { return true; };
        
        // Wrap ALL event listeners to prevent crashes
        if (window.addEventListener) {
            var originalAddEventListener = window.addEventListener;
            window.addEventListener = function(type, listener, options) {
                var safeListener = function(event) {
                    try {
                        if (typeof listener === 'function') {
                            return listener.call(this, event);
                        }
                    } catch (e) {
                        // Silence all event listener errors
                        return false;
                    }
                };
                return originalAddEventListener.call(this, type, safeListener, options);
            };
            
            // PRODUCTION: Suppress all error events for clean UX
            window.addEventListener('error', function(e) {
                try {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                } catch (ex) {
                    // Ignore
                }
                return false;
            }, true);
            
            // PRODUCTION: Suppress unhandled promise rejections for clean UX
            window.addEventListener('unhandledrejection', function(e) {
                try {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                } catch (ex) {
                    // Ignore
                }
            }, true);
        }
        
        // Override setTimeout and setInterval to prevent crashes
        var originalSetTimeout = window.setTimeout;
        var originalSetInterval = window.setInterval;
        
        window.setTimeout = function(callback, delay) {
            return originalSetTimeout.call(this, function() {
                try {
                    if (typeof callback === 'function') {
                        return callback.apply(this, arguments);
                    }
                } catch (e) {
                    // Silence timeout errors
                }
            }, delay);
        };
        
        window.setInterval = function(callback, delay) {
            return originalSetInterval.call(this, function() {
                try {
                    if (typeof callback === 'function') {
                        return callback.apply(this, arguments);
                    }
                } catch (e) {
                    // Silence interval errors
                }
            }, delay);
        };
        
        // Final safety net - override Object.prototype property access
        try {
            var originalValueOf = Object.prototype.valueOf;
            Object.prototype.valueOf = function() {
                try {
                    return originalValueOf.call(this);
                } catch (e) {
                    return null;
                }
            };
        } catch (e) {
            // Ignore if we can't override valueOf
        }
        
        // Intercept postMessage to prevent React DevTools messages
        var originalPostMessage = window.postMessage;
        window.postMessage = function(message, targetOrigin, transfer) {
            try {
                // Check if this is a React DevTools message
                var msgStr = '';
                if (typeof message === 'string') {
                    msgStr = message.toLowerCase();
                } else if (typeof message === 'object' && message !== null) {
                    msgStr = JSON.stringify(message).toLowerCase();
                }
                
                // Block React DevTools messages
                if (msgStr.indexOf('react') !== -1 || 
                    msgStr.indexOf('devtools') !== -1 ||
                    msgStr.indexOf('__react') !== -1 ||
                    msgStr.indexOf('welcome') !== -1 ||
                    msgStr.indexOf('duplicate') !== -1) {
                    return; // Silently drop the message
                }
                
                // Allow other messages through
                return originalPostMessage.apply(this, arguments);
            } catch (e) {
                // If there's any error, just drop the message
                return;
            }
        };
        
        // Also override addEventListener for 'message' events to filter them
        var originalMessageHandler = null;
        window.addEventListener('message', function(event) {
            try {
                // Check if this is a React DevTools related message
                var data = event.data;
                var dataStr = '';
                if (typeof data === 'string') {
                    dataStr = data.toLowerCase();
                } else if (typeof data === 'object' && data !== null) {
                    dataStr = JSON.stringify(data).toLowerCase();
                }
                
                // Block React DevTools messages
                if (dataStr.indexOf('react') !== -1 || 
                    dataStr.indexOf('devtools') !== -1 ||
                    dataStr.indexOf('__react') !== -1 ||
                    dataStr.indexOf('welcome') !== -1) {
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    return false;
                }
            } catch (e) {
                // Silence any errors
            }
        }, true); // Use capture phase to intercept early
        
    })();
    </script>
    
    <!-- Enhanced Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://accounts.google.com https://apis.google.com chrome-extension: moz-extension: safari-extension:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com; font-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com data:; img-src 'self' data: blob: https: https://*.espn.com https://*.nfl.com https://*.googleapis.com; connect-src 'self' ws://localhost:* wss://localhost:* http://localhost:* https://localhost:* https://astraldraft.netlify.app wss://astraldraft.netlify.app https://api.gemini.com https://generativelanguage.googleapis.com https://*.espn.com https://api.the-odds-api.com https://api.sportsdata.io https://accounts.google.com https://oauth.googleapis.com https://www.googleapis.com chrome-extension: moz-extension: safari-extension:; manifest-src 'self'; worker-src 'self' blob:; object-src 'none'; base-uri 'self'; form-action 'self' https://accounts.google.com; frame-src 'self' https://accounts.google.com https://oauth.googleapis.com; media-src 'self' data: blob:; upgrade-insecure-requests;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <!-- X-Frame-Options removed - must be set via HTTP headers, not meta tags -->
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="accelerometer=(), ambient-light-sensor=(), autoplay=(self), battery=(), camera=(), cross-origin-isolated=(), display-capture=(), document-domain=(), encrypted-media=(), execution-while-not-rendered=(), execution-while-out-of-viewport=(), fullscreen=(self), geolocation=(), gyroscope=(), keyboard-map=(), magnetometer=(), microphone=(), midi=(), navigation-override=(), payment=(), picture-in-picture=(), publickey-credentials-get=(), screen-wake-lock=(), sync-xhr=(), usb=(), web-share=(), xr-spatial-tracking=()">
    
    <!-- Preconnect for performance and security -->
    <link rel="preconnect" href="https://accounts.google.com" crossorigin>
    <link rel="preconnect" href="https://apis.google.com" crossorigin>
    
    
    <!-- Enhanced Performance Optimization Resource Hints -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link rel="dns-prefetch" href="//api.stripe.com" />
    <link rel="dns-prefetch" href="//generativelanguage.googleapis.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://api.stripe.com" />
    <!-- Module preloads will be handled automatically by Vite build -->
    
    <!-- Preload critical resources with optimized font loading -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700;800;900&family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Exo+2:wght@700;800;900&family=Inter:wght@400;500;600;700&display=swap"></noscript>
    
    <!-- Chunk prefetching will be handled automatically by Vite build -->
    
    <!-- CSS preloading will be handled automatically by Vite build -->
    
    <!-- Critical CSS inlined for faster FCP -->
    <style>
      :root {
        --background-start-rgb: 2, 6, 23;
        --background-end-rgb: 2, 6, 23;
        --glow-color-1: rgba(16, 185, 129, 0.4);
        --glow-color-2: rgba(37, 99, 235, 0.4);
        --text-primary: #e2e8f0;
        --text-secondary: #94a3b8;
        --panel-bg: rgba(15, 23, 42, 0.4);
        --panel-border: rgba(56, 189, 248, 0.2);
      }
      html.light {
        --background-start-rgb: 241, 245, 249;
        --background-end-rgb: 226, 232, 240;
        --glow-color-1: rgba(16, 185, 129, 0.3);
        --glow-color-2: rgba(37, 99, 235, 0.3);
        --text-primary: #0f172a;
        --text-secondary: #475569;
        --panel-bg: rgba(255, 255, 255, 0.5);
        --panel-border: rgba(203, 213, 225, 1);
      }
      
      [data-theme="rivalry"] {
        --glow-color-1: rgba(239, 68, 68, 0.5); /* red-500 */
        --panel-border: rgba(248, 113, 113, 0.3); /* red-400 */
      }

      body {
        font-family: 'Inter', sans-serif;
        background-color: rgb(var(--background-start-rgb));
        color: var(--text-primary);
        margin: 0;
        padding: 0;
      }
      .font-display {
        font-family: 'Exo 2', sans-serif;
      }
      #root {
        height: 100vh;
        width: 100vw;
        display: flex;
        flex-direction: column;
        position: relative;
      }
      #root::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(to bottom, transparent, rgb(var(--background-end-rgb))) rgb(var(--background-start-rgb));
        z-index: -2;
      }
      
      #confetti-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 100;
      }

      /* Starfield Backgrounds */
      @keyframes move-background {
        from { transform: translate3d(0px, 0px, 0px); }
        to { transform: translate3d(1000px, 0px, 0px); }
      }
       @keyframes warp-speed {
        from { transform: translateY(-100%); }
        to { transform: translateY(0%); }
      }
       @keyframes nebula-pulse {
        0%, 100% { opacity: 0.2; transform: scale(1); }
        50% { opacity: 0.4; transform: scale(1.05); }
      }
      @keyframes rivalry-pulse {
        0%, 100% { opacity: 0.3; transform: scale(1) rotate(0deg); }
        50% { opacity: 0.6; transform: scale(1.1) rotate(5deg); }
      }

      .stars, .dynamic-bg {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        display: block;
        z-index: -3;
      }
      
      html.dark .stars {
        background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><circle fill="%23fff" cx="100" cy="100" r="1.5"/><circle fill="%23fff" cx="300" cy="700" r="1"/><circle fill="%23fff" cx="800" cy="200" r="1.2"/><circle fill="%23fff" cx="500" cy="500" r="0.8"/><circle fill="%23fff" cx="900" cy="900" r="1.1"/><circle fill="%23fff" cx="200" cy="400" r="0.9"/><circle fill="%23fff" cx="600" cy="100" r="1.3"/><circle fill="%23fff" cx="400" cy="800" r="1"/><circle fill="%23fff" cx="700" cy="600" r="1.2"/></svg>') repeat 30% 30%;
      }
      
      .stars1 { animation: move-background 150s linear infinite; z-index: -5; }
      .stars2 { animation: move-background 100s linear infinite; opacity: 0.6; z-index: -4; }
      .stars3 { animation: move-background 75s linear infinite; opacity: 0.4; z-index: -3; }
      
      [data-view="DRAFT_ROOM"] .dynamic-bg::after {
        content: '';
        position: absolute;
        width: 2px;
        height: 100%;
        background: linear-gradient(rgba(255,255,255,0.7), transparent);
        animation: warp-speed 0.8s linear infinite;
        box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px cyan, 0 0 20px cyan;
        left: 20%;
      }
      [data-view="DRAFT_ROOM"] .dynamic-bg::before {
        content: '';
        position: absolute;
        width: 2px;
        height: 100%;
        background: linear-gradient(rgba(255,255,255,0.7), transparent);
        animation: warp-speed 1.2s linear infinite;
        box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px cyan, 0 0 20px cyan;
        left: 80%;
        animation-delay: -0.4s;
      }

      [data-view="TEAM_HUB"] .dynamic-bg::after {
        content: '';
        position: absolute;
        inset: -100px;
        background: radial-gradient(circle at 20% 20%, rgba(37, 99, 235, 0.5), transparent 40%),
                    radial-gradient(circle at 80% 70%, rgba(132, 59, 206, 0.4), transparent 40%);
        animation: nebula-pulse 20s ease-in-out infinite;
      }
      
      [data-theme="rivalry"] .dynamic-bg::after {
        content: '';
        position: absolute;
        inset: -150px;
        background: radial-gradient(circle at 30% 80%, rgba(220, 38, 38, 0.4), transparent 50%),
                    radial-gradient(circle at 70% 20%, rgba(234, 88, 12, 0.3), transparent 50%);
        animation: rivalry-pulse 10s ease-in-out infinite alternate;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: rgba(127, 127, 127, 0.1);
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: linear-gradient(45deg, var(--glow-color-1), var(--glow-color-2));
        border-radius: 10px;
      }
      .glass-pane {
        background-color: var(--panel-bg);
        border: 1px solid var(--panel-border);
        backdrop-filter: blur(12px);
      }
      .btn-primary {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 300ms;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px var(--glow-color-1), 0 4px 6px -4px var(--glow-color-2);
      }
    </style>
</head>
<body>
    <div class="stars stars1"></div>
    <div class="stars stars2"></div>
    <div class="stars stars3"></div>
    <div class="dynamic-bg"></div>
    <div id="root">
        <!-- Loading screen - should be replaced by React -->
        <div id="loading-fallback" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #1e3a8a 0%, #312e81 100%); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
            <div style="text-align: center; color: white;">
                <div style="font-size: 72px; margin-bottom: 20px;">🏈</div>
                <h1 style="font-size: 36px; font-weight: bold; margin: 0 0 16px 0;">Astral Draft</h1>
                <p style="font-size: 18px; opacity: 0.9; margin: 0 0 16px 0;">Fantasy Football Platform</p>
                <div style="display: inline-flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                    <div style="width: 12px; height: 12px; background: white; border-radius: 50%; animation: pulse 1.5s ease-in-out infinite;"></div>
                    <div style="width: 12px; height: 12px; background: white; border-radius: 50%; animation: pulse 1.5s ease-in-out infinite; animation-delay: 0.3s;"></div>
                    <div style="width: 12px; height: 12px; background: white; border-radius: 50%; animation: pulse 1.5s ease-in-out infinite; animation-delay: 0.6s;"></div>
                </div>
                <div id="debug-info" style="font-size: 12px; opacity: 0.7; max-width: 400px; text-align: left; margin: 16px auto; background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px;">
                    <div>🔍 Initializing app...</div>
                    <div id="debug-timer">⏱️ Loading: 0s</div>
                </div>
                <button onclick="window.location.reload()" style="margin-top: 16px; padding: 8px 16px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; border-radius: 6px; cursor: pointer;">
                    🔄 Refresh Page
                </button>
                <noscript>
                    <p style="margin-top: 32px; padding: 16px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                        JavaScript is required to run this application. Please enable JavaScript in your browser settings.
                    </p>
                </noscript>
            </div>
        </div>
        <style>
            @keyframes pulse {
                0%, 100% { opacity: 0.3; transform: scale(0.8); }
                50% { opacity: 1; transform: scale(1); }
            }
        </style>
    </div>
    <canvas id="confetti-canvas"></canvas>
    <!-- Performance monitoring and optimization -->
    <script>
      // Initialize performance monitoring early
      window.__PERF_START = performance.now();
      window.__PERF_MARKS = {};
      
      // Mark critical performance milestones
      performance.mark('html-start');
      
      // Lazy load non-critical resources after page load
      window.addEventListener('load', function() {
        requestIdleCallback(function() {
          // Prefetch likely next routes
          ['feature-players', 'feature-trade', 'feature-waiver'].forEach(function(chunk) {
            var link = document.createElement('link');
            link.rel = 'prefetch';
            link.href = '/' + chunk + '.js';
            document.head.appendChild(link);
          });
        });
      });
    </script>
    
    <!-- Emergency loading screen debugging and failsafe -->
    <script>
      // Debug timer and failsafe for loading screen
      let startTime = Date.now();
      let debugTimer;
      let emergencyTimer;
      
      function updateDebugTimer() {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const timerEl = document.getElementById('debug-timer');
        if (timerEl) {
          timerEl.textContent = `⏱️ Loading: ${elapsed}s`;
        }
      }
      
      function addDebugInfo(message) {
        const debugEl = document.getElementById('debug-info');
        if (debugEl) {
          const div = document.createElement('div');
          div.textContent = message;
          debugEl.appendChild(div);
        }
      }
      
      // Start debug timer
      debugTimer = setInterval(updateDebugTimer, 1000);
      
      // Emergency failsafe - if React doesn't load in 8 seconds, show emergency UI
      emergencyTimer = setTimeout(() => {
        addDebugInfo('🚨 EMERGENCY: React not loading, showing fallback');
        const loadingEl = document.getElementById('loading-fallback');
        if (loadingEl) {
          loadingEl.innerHTML = `
            <div style="text-align: center; color: white; max-width: 600px; padding: 20px;">
              <div style="font-size: 72px; margin-bottom: 20px;">🏈</div>
              <h1 style="font-size: 36px; font-weight: bold; margin: 0 0 16px 0;">Astral Draft</h1>
              <p style="font-size: 18px; opacity: 0.9; margin: 0 0 32px 0;">Fantasy Football Platform</p>
              
              <!-- Emergency Player Login Icons -->
              <div style="background: rgba(0,0,0,0.5); padding: 32px; border-radius: 16px; margin: 32px 0;">
                <h2 style="font-size: 24px; margin-bottom: 24px;">🚨 Emergency Mode - Select Your Player</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 16px; max-width: 500px; margin: 0 auto;">
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(59, 130, 246, 0.8); border: 2px solid rgba(59, 130, 246, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 1</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(16, 185, 129, 0.8); border: 2px solid rgba(16, 185, 129, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 2</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(245, 101, 101, 0.8); border: 2px solid rgba(245, 101, 101, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 3</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(168, 85, 247, 0.8); border: 2px solid rgba(168, 85, 247, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 4</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(251, 146, 60, 0.8); border: 2px solid rgba(251, 146, 60, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 5</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(34, 197, 94, 0.8); border: 2px solid rgba(34, 197, 94, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 6</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(239, 68, 68, 0.8); border: 2px solid rgba(239, 68, 68, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 7</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(14, 165, 233, 0.8); border: 2px solid rgba(14, 165, 233, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 8</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(139, 69, 19, 0.8); border: 2px solid rgba(139, 69, 19, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 9</div>
                  </button>
                  <button onclick="alert('Emergency mode - full app would load here')" style="padding: 16px; background: rgba(107, 114, 128, 0.8); border: 2px solid rgba(107, 114, 128, 1); border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <div style="font-size: 32px;">👤</div>
                    <div style="font-size: 12px; margin-top: 8px;">Player 10</div>
                  </button>
                </div>
              </div>
              
              <div style="margin-top: 32px; padding: 16px; background: rgba(255,0,0,0.2); border: 1px solid rgba(255,0,0,0.4); border-radius: 8px; font-size: 14px;">
                ⚠️ React app failed to load. This emergency interface allows basic functionality.
                <br><button onclick="window.location.reload()" style="margin-top: 12px; padding: 8px 16px; background: rgba(59, 130, 246, 0.8); border: none; color: white; border-radius: 6px; cursor: pointer;">🔄 Try Reload</button>
              </div>
            </div>
          `;
        }
      }, 8000);
      
      // Monitor for React mounting with improved detection
      let reactDetected = false;
      const observer = new MutationObserver((mutations) => {
        if (reactDetected) return; // Prevent multiple executions
        
        mutations.forEach((mutation) => {
          if (mutation.type === 'childList') {
            const rootEl = document.getElementById('root');
            const loadingEl = document.getElementById('loading-fallback');
            
            // Multiple ways to detect React has mounted
            const hasReactContent = document.querySelector('[data-reactroot]') || 
                                   document.querySelector('.App') ||
                                   document.querySelector('[class*="react"]') ||
                                   document.querySelector('div[class^="css-"]') ||
                                   document.querySelector('button[class*="btn"]') ||
                                   document.querySelector('[class*="Card"]') ||
                                   (rootEl && rootEl.children.length > 1);
            
            // Also check if the loading screen is the only child
            const onlyLoadingScreen = loadingEl && rootEl && rootEl.children.length === 1 && rootEl.children[0] === loadingEl;
            
            if (hasReactContent && !onlyLoadingScreen) {
              reactDetected = true;
              addDebugInfo('✅ React detected, removing loading screen...');
              
              // Force remove loading screen
              if (loadingEl) {
                loadingEl.style.display = 'none';
                setTimeout(() => {
                  if (loadingEl.parentNode) {
                    loadingEl.parentNode.removeChild(loadingEl);
                  }
                }, 100);
                addDebugInfo('🧹 Loading screen removed');
              }
              
              clearInterval(debugTimer);
              clearTimeout(emergencyTimer);
              observer.disconnect();
              addDebugInfo('🎉 Initialization complete!');
            }
          }
        });
      });
      
      observer.observe(document.getElementById('root'), {
        childList: true,
        subtree: true,
        attributes: true,
        attributeOldValue: true
      });
      
      // Additional check every 500ms for React content
      const reactCheckInterval = setInterval(() => {
        if (reactDetected) {
          clearInterval(reactCheckInterval);
          return;
        }
        
        const rootEl = document.getElementById('root');
        const loadingEl = document.getElementById('loading-fallback');
        
        // Check if React has rendered by looking for common patterns
        const hasReactElements = document.querySelector('div[class*="bg-"]') ||
                                document.querySelector('button[class*="btn"]') ||
                                document.querySelector('[class*="flex"]') ||
                                document.querySelector('[class*="grid"]') ||
                                document.querySelector('[class*="Card"]') ||
                                document.querySelector('[class*="Button"]');
        
        const onlyLoadingScreen = loadingEl && rootEl && rootEl.children.length === 1 && rootEl.children[0] === loadingEl;
        
        if (hasReactElements && !onlyLoadingScreen && !reactDetected) {
          reactDetected = true;
          addDebugInfo('✅ React detected via interval check');
          
          // Force remove loading screen
          if (loadingEl) {
            loadingEl.style.display = 'none';
            setTimeout(() => {
              if (loadingEl.parentNode) {
                loadingEl.parentNode.removeChild(loadingEl);
              }
            }, 100);
            addDebugInfo('🧹 Loading screen removed via interval');
          }
          
          clearInterval(debugTimer);
          clearTimeout(emergencyTimer);
          clearInterval(reactCheckInterval);
          observer.disconnect();
          addDebugInfo('🎉 React fully loaded!');
        }
      }, 500);
      
      addDebugInfo('🔍 Monitoring for React...');
    </script>
    
    <script type="module" src="/index.tsx"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            // Enhanced service worker path resolution with fallback
            let swPath = '/sw.js';
            
            // Check if we're in a subdirectory deployment
            const currentPath = window.location.pathname;
            if (currentPath !== '/' && !currentPath.endsWith('/')) {
              // Extract base path for subdirectory deployments
              const pathSegments = currentPath.split('/').slice(0, -1);
              const basePath = pathSegments.join('/');
              swPath = basePath + '/sw.js';
            } else if (currentPath.endsWith('/') && currentPath !== '/') {
              swPath = currentPath + 'sw.js';
            }
            
            // Verify service worker file exists before registration
            try {
              const response = await fetch(swPath, { method: 'HEAD' });
              if (!response.ok) {
                throw new Error(`Service worker not found at ${swPath}`);
              }
            } catch (fetchError) {
              console.warn('Service worker file check failed:', fetchError.message);
              // Fallback to root path
              swPath = '/sw.js';
            }
            
            const registration = await navigator.serviceWorker.register(swPath, {
              scope: currentPath === '/' ? '/' : currentPath,
              updateViaCache: 'none' // Ensure fresh updates
            });
            
            // Enhanced registration handling
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              if (newWorker) {
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // New service worker available, could show update notification
                    console.log('New service worker available');
                  }
                });
              }
            });
            
            // Production: Service worker registered successfully
            
          } catch (registrationError) {
            // Enhanced error handling - don't break the app if SW fails
            // Service worker registration failed (non-critical)
            
            // Gracefully degrade without service worker
            // PWA features will be disabled but app remains functional
            window.__SW_DISABLED = true;
          }
        });
      } else {
        // Service workers not supported
        window.__SW_DISABLED = true;
        // Service workers not supported - graceful degradation
      }
    </script>

</body>
</html>